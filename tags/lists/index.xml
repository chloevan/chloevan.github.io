<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>lists on Data Science | ChloEvan</title>
    <link>https://chloevan.github.io/tags/lists/</link>
    <description>Recent content in lists on Data Science | ChloEvan</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Wed, 29 Apr 2020 11:38:15 +0900</lastBuildDate>
    
        <atom:link href="https://chloevan.github.io/tags/lists/index.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>list handling</title>
      <link>https://chloevan.github.io/r/basics/list/</link>
      <pubDate>Wed, 29 Apr 2020 11:38:15 +0900</pubDate>
      
      <guid>https://chloevan.github.io/r/basics/list/</guid>
      <description>&lt;h2 id=&#34;i-개요&#34;&gt;I. 개요&lt;/h2&gt;
&lt;p&gt;모든 프로그래밍 언어에는 기본적으로 데이터타입이 존재한다. R도 프로그래밍 언어이기 때문에 데이터 타입의 일반적인 유형이 존재한다.&lt;/p&gt;
&lt;p&gt;&lt;img src=&#34;https://chloevan.github.io/img/r_basics/data_structure.png&#34; alt=&#34;&#34;&gt;&lt;/p&gt;
&lt;p&gt;&lt;code&gt;Vector&lt;/code&gt;의 기본 개념을 익혔다면, 전반적인 구조에 대해 살피는 시간을 갖도록 한다. 먼저 동일 성질의 &lt;code&gt;Vector&lt;/code&gt;가 모여서 &lt;code&gt;matrix&lt;/code&gt;도 되고, 데이터프레임도 된다. 그리고 이러한 다양한 데이터의 구조가 모여 리스트를 형성하는데,&lt;/p&gt;
&lt;p&gt;리스트를 만드는 것도 중요한 건, 즉 이해다. 리스트에 접근법이 중요한데, 리스트를 잘 다루면, &lt;code&gt;apply&lt;/code&gt; 함수 계열을 사용하는데도 큰 도움이 된다.&lt;/p&gt;
&lt;p&gt;특히, 100GB 이상의 데이터를 다루게 되면, &lt;code&gt;apply()&lt;/code&gt; 함수로 작업해야 하는 일이 종종 발생한다.&lt;/p&gt;
&lt;h2 id=&#34;ii-list-생성&#34;&gt;II. List 생성&lt;/h2&gt;
&lt;p&gt;이제 리스트를 작성해보자. 문자형 벡터와 숫자형 벡터를 만든후 리스트에 넣도록 한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;xNum &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3.14&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;7&lt;/span&gt;)
xChar &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;A&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;B&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;C&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;D&amp;#34;&lt;/span&gt;)
xList &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;list&lt;/span&gt;(xNum, xChar)
&lt;span style=&#34;color:#a6e22e&#34;&gt;print&lt;/span&gt;(xList)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [[1]]
## [1] 1.00 3.14 5.00 7.00
## 
## [[2]]
## [1] &amp;quot;A&amp;quot; &amp;quot;B&amp;quot; &amp;quot;C&amp;quot; &amp;quot;D&amp;quot;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;이 출력값에서 주의 깊게 봐야 하는 것 &lt;code&gt;[[1]]&lt;/code&gt;과 같은 형태이다. 즉, &lt;code&gt;A&lt;/code&gt;, &lt;code&gt;1.00&lt;/code&gt;과 같은 실제 값이 들어있는 각각의 원소에 대해 접근을 하려면, &lt;code&gt;[[1]]&lt;/code&gt;과 같은 것에 먼저 접근을 해야 하기 때문이다.&lt;/p&gt;
&lt;p&gt;실제로 &lt;code&gt;3.14&lt;/code&gt;을 출력하도록 해본다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;xList[[1]][2]
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 3.14
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;출력을 할 때는 위와 같은 형태로 작성을 해야 한다.&lt;/p&gt;
&lt;p&gt;그런데, 우리가 궁금한 것은 이러한 접근법이 중요한 것이 아니다. &lt;code&gt;List&lt;/code&gt;라는 데이터안에 있는 값에서 의미있는 수치를 뽑아야 하는 것이 데이터 분석가가 하는 일이기 때문이다.&lt;/p&gt;
&lt;p&gt;이제 간단한 &lt;code&gt;lappy()&lt;/code&gt; 함수를 활용해서 간단하게 통계 수치를 뽑도록 한다.&lt;/p&gt;
&lt;h2 id=&#34;iii-lapply&#34;&gt;III. lapply()&lt;/h2&gt;
&lt;p&gt;lapply() 함수는 추후에 &lt;code&gt;apply&lt;/code&gt; 함수 계열에 대해서 자세하게 설명할 때 다시한번 드리도록 하겠다. 각각의 &lt;code&gt;apply&lt;/code&gt;함수는 input 데이터구조와 output 데이터 구조에 따라 사용되어야 할 함수 이름이 조금씩 다르다.&lt;/p&gt;
&lt;p&gt;참고로 lapply인 이유는 output이 리스트로 반환되기 때문에 그렇다.&lt;/p&gt;
&lt;h3 id=&#34;1-사용설명서&#34;&gt;(1) 사용설명서&lt;/h3&gt;
&lt;p&gt;필자는 R의 사용설명서를 좋아한다. 예제와 설명이 주로 박사급 사람들이 작성해서 그런가 가독성이 좋다.&lt;/p&gt;
&lt;p&gt;꼭 다음을 실행해서 사용설명서를 읽기를 바란다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;help&lt;/span&gt;(lapply)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;code&gt;lappy()&lt;/code&gt;의 구조는 다음과 같다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lapply&lt;/span&gt;(객체(vector, dataframe, list), FUNCTION)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-without-lapply&#34;&gt;(2) Without lapply&lt;/h3&gt;
&lt;p&gt;이제 함수를 적용한다. 이번에 활용하려는 건, 리스트에 저장되어 있는 &lt;code&gt;xNum&lt;/code&gt;값의 &lt;code&gt;summary&lt;/code&gt;, &lt;code&gt;max&lt;/code&gt;, &lt;code&gt;min&lt;/code&gt;, &lt;code&gt;mean&lt;/code&gt;값을 구하려고 한다.&lt;/p&gt;
&lt;p&gt;아래와 같이 적용해야 할 것이다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;summary&lt;/span&gt;(xList[[1]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   2.605   4.070   4.035   5.500   7.000
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;max&lt;/span&gt;(xList[[1]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 7
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;min&lt;/span&gt;(xList[[1]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 1
&lt;/code&gt;&lt;/pre&gt;&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;mean&lt;/span&gt;(xList[[1]])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 4.035
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;위 코드의 단점은 당연히 확장성이 떨어진다. 즉, 1개의 벡터에만 접근이 가능하기 때문에 실무에서는 당연히 쓰지 않는다.&lt;/p&gt;
&lt;h3 id=&#34;3-with-lapply&#34;&gt;(3) With lapply&lt;/h3&gt;
&lt;p&gt;이번에는 &lt;code&gt;lapply&lt;/code&gt;을 활용해서 값을 구해보자.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lapply&lt;/span&gt;(xList, summary)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [[1]]
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   2.605   4.070   4.035   5.500   7.000 
## 
## [[2]]
##    Length     Class      Mode 
##         4 character character
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;문자열까지 조회가 되는 것을 확인할 수 있다. 여기에서 조금더 &lt;code&gt;list&lt;/code&gt;를 확장해보자. &lt;code&gt;xList&lt;/code&gt;에 &lt;code&gt;xNum2&lt;/code&gt; 객체를 추가한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;xNum2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
xList[[3]] &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; xNum2
&lt;span style=&#34;color:#a6e22e&#34;&gt;str&lt;/span&gt;(xList)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## List of 3
##  $ : num [1:4] 1 3.14 5 7
##  $ : chr [1:4] &amp;quot;A&amp;quot; &amp;quot;B&amp;quot; &amp;quot;C&amp;quot; &amp;quot;D&amp;quot;
##  $ : num [1:4] 2 3 4 5
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;이렇게 추가가 된 것을 확인할 수 있다.&lt;/p&gt;
&lt;p&gt;이제, 애초에 구하려고 했던, &lt;code&gt;max&lt;/code&gt;, &lt;code&gt;min&lt;/code&gt;, &lt;code&gt;mean&lt;/code&gt; 를 구할 수 있습니다. 결과가 어떻게 나오는지 확인합니다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;max&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lapply&lt;/span&gt;(xList, max)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [[1]]
## [1] 7
## 
## [[2]]
## [1] &amp;quot;D&amp;quot;
## 
## [[3]]
## [1] 5
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;min&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lapply&lt;/span&gt;(xList, min)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [[1]]
## [1] 1
## 
## [[2]]
## [1] &amp;quot;A&amp;quot;
## 
## [[3]]
## [1] 2
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;mean&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lapply&lt;/span&gt;(xList, mean)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## Warning in mean.default(X[[i]], ...): argument is not numeric or logical:
## returning NA
&lt;/code&gt;&lt;/pre&gt;&lt;pre&gt;&lt;code&gt;## [[1]]
## [1] 4.035
## 
## [[2]]
## [1] NA
## 
## [[3]]
## [1] 3.5
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;문자형이 있어도, &lt;code&gt;apply&lt;/code&gt;함수에서는 우선 출력됨을 볼 수 있다. 여기에서 문자형의 값 처리에 대한 설명은 본 포스트의 작성 범위를 넘어서게 된다.&lt;/p&gt;
&lt;p&gt;R의 기본함수는 다른 언어와 다르게 데이터 타입마다 엄격하게 적용되는 건 아니다! (Why?) 이 부분이 R의 장점이자, 추후에 단점으로 작용하기도 한다.&lt;/p&gt;
&lt;h3 id=&#34;4-naming&#34;&gt;(4) Naming&lt;/h3&gt;
&lt;p&gt;각 벡터에 이제 이름을 지어서 List 작성 하면, 원소의 접근법이 보다 수월해진다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;names&lt;/span&gt;(xList) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;itemNum&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;itemChar&amp;#34;&lt;/span&gt;, &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;itemNum2&amp;#34;&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;이제, &lt;code&gt;$name&lt;/code&gt; 또는 &lt;code&gt;[[&amp;quot;name&amp;quot;]]&lt;/code&gt;과 같은 형태로 원소에 접근할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;xList&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;itemNum
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 1.00 3.14 5.00 7.00
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;이를 통해서 &lt;code&gt;lapply()&lt;/code&gt; 활용하면 조금 더 깔끔하게 출력할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;lapply&lt;/span&gt;(xList, summary)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## $itemNum
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##   1.000   2.605   4.070   4.035   5.500   7.000 
## 
## $itemChar
##    Length     Class      Mode 
##         4 character character 
## 
## $itemNum2
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max. 
##    2.00    2.75    3.50    3.50    4.25    5.00
&lt;/code&gt;&lt;/pre&gt;&lt;h2 id=&#34;vi-결론&#34;&gt;VI. 결론&lt;/h2&gt;
&lt;p&gt;List는 R에서 매우 중요하다. 특히, 데이터셋이 꼭 &lt;code&gt;data.frame&lt;/code&gt;만 존재하는 것은 아니다.&lt;/p&gt;
&lt;p&gt;지도 데이터는 &lt;code&gt;sp&lt;/code&gt;라는 객체로 불리어지고, &lt;code&gt;json&lt;/code&gt;타입도 존재한다. 이러한 데이터를 다루는데 적합한 데이터 구조가 &lt;code&gt;list&lt;/code&gt;이기 때문에 주기적으로 다룰 필요가 있다.&lt;/p&gt;
&lt;h2 id=&#34;v-reference&#34;&gt;V. Reference&lt;/h2&gt;
&lt;p&gt;Chapman, C., &amp;amp; Feit, E. M. D. (2015). R for marketing research and analytics. Cham: Springer.&lt;/p&gt;
</description>
    </item>
    
  </channel>
</rss>