<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>Modeling Visualisation on Data Science | ChloEvan</title>
    <link>https://chloevan.github.io/tags/modeling-visualisation/</link>
    <description>Recent content in Modeling Visualisation on Data Science | ChloEvan</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <lastBuildDate>Fri, 15 May 2020 11:10:39 +0900</lastBuildDate>
    
        <atom:link href="https://chloevan.github.io/tags/modeling-visualisation/rss.xml" rel="self" type="application/rss+xml" />
    
    
    <item>
      <title>ch04 - Modeling Visualisation</title>
      <link>https://chloevan.github.io/r/datavisualisation/ch04_modeling_visualisation/</link>
      <pubDate>Fri, 15 May 2020 11:10:39 +0900</pubDate>
      
      <guid>https://chloevan.github.io/r/datavisualisation/ch04_modeling_visualisation/</guid>
      <description>&lt;h2 id=&#34;개요&#34;&gt;개요&lt;/h2&gt;
&lt;blockquote&gt;
&lt;p&gt;A picture is worth a thousand words — English Language Adage
The simple graph has brought more information to the data analyst’s mind than any other device. — John Tukey&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;한장의 그림이 수천단어보다 가치가 있다는 영어속담과, 명료한 시각화가 데이터분석가에게 다른 어떤 도구보다 더 많은 정보를 제공한다는 유명한 데이터 과학자의 조언. 핵심은 시각화이다.&lt;/p&gt;
&lt;p&gt;본 장에서는 &lt;code&gt;ggplot2&lt;/code&gt; 패키지를 활용한 시각화를 먼저 보여줄 것이다. 먼저 간단하게 &lt;code&gt;ggplot2&lt;/code&gt; 패키지에 소개하자면 &lt;code&gt;Grammar of Graphics&lt;/code&gt;&lt;sup id=&#34;fnref:1&#34;&gt;&lt;a href=&#34;#fn:1&#34; class=&#34;footnote-ref&#34; role=&#34;doc-noteref&#34;&gt;1&lt;/a&gt;&lt;/sup&gt;의 철학을 담아서 &lt;code&gt;R&lt;/code&gt; 생태계에서 유명한 학자 중, &lt;code&gt;Hadley Wickham&lt;/code&gt;에 의해 주도적으로 개발되었다. 그래프에도 문법이 있다는 패키지의 철학 아래, &lt;code&gt;R&lt;/code&gt;의 시각화는 괄목할만한 발전을 이루었고 이는 &lt;code&gt;R&lt;/code&gt;의 대중화에도 큰 영향을 끼쳤다.&lt;/p&gt;
&lt;p&gt;보통 시각화라고 하면 탐색적 자료 분석에 시각화를 많이 의미할 수도 있다. 그런데, 모델링 결과 또는 통계적인 결과를 시각화로 보여줄 수 있는 능력을 갖추는 것은 데이터분석가로써 한번 더 도약할 수 있다.&lt;/p&gt;
&lt;p&gt;오늘 포스트는 이러한 주제에 맞춰서 다루도록 한다. 주요 이론적인 내용은 &lt;code&gt;Hadley Wickham&lt;/code&gt;의 &lt;code&gt;R for Data Science&lt;/code&gt;를 참고했다.&lt;/p&gt;
&lt;h2 id=&#34;i-사전준비&#34;&gt;I. 사전준비&lt;/h2&gt;
&lt;p&gt;본 장에서는 시각화를 위해서 &lt;code&gt;ggplot2&lt;/code&gt;를 주요 패키지로 사용한다. &lt;code&gt;ggplot2&lt;/code&gt; 패키지를 설치했다고 가정한다. 만약 처음 패키지를 설치하는 사람이라면 &lt;a href=&#34;https://wikidocs.net/58057&#34;&gt;R 패키지 설치&lt;/a&gt;[^2]에서 다시 한번 R 패키지 주요 생태계에 대해 이해하도록 한다.&lt;/p&gt;
&lt;h2 id=&#34;ii-모델의-정의&#34;&gt;II. 모델의 정의&lt;/h2&gt;
&lt;p&gt;통계에서 모델은 무엇일까? 또는 통계에서 모델의 역할은 무엇일까? 학자마다, 또는 주어진 환경에 따라 다르게 정의될 수도 있지만,&lt;/p&gt;
&lt;p&gt;기본적으로 &lt;code&gt;모델은 데이터의 특유의 알고리즘을 통해 일반적인 패턴을 가장 잘 요약해주는 일종의 &lt;/code&gt;summary&lt;code&gt;와 같은 기능&lt;/code&gt;이다라고 정의할 수 있다.&lt;/p&gt;
&lt;p&gt;보통 모델이 &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;not true&lt;/code&gt; 이렇게 인식될 수도 있다. 그러나, 모델은 &lt;code&gt;true&lt;/code&gt; or &lt;code&gt;not true&lt;/code&gt;로 인식되기 보다는 &lt;code&gt;useful&lt;/code&gt; or &lt;code&gt;not useful&lt;/code&gt;로 판단하는 것이 좋다. 즉, 쓸만한 모형을 찾는 과정이 &lt;code&gt;modeling&lt;/code&gt;이라고 할 수 있겠다.&lt;/p&gt;
&lt;h2 id=&#34;iii-모델링-시각화&#34;&gt;III. 모델링 시각화&lt;/h2&gt;
&lt;p&gt;모형 학습을 위해서 필요한 필수 패키지를 설치한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(tidyverse)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(modelr)
&lt;span style=&#34;color:#a6e22e&#34;&gt;library&lt;/span&gt;(moderndive)
&lt;span style=&#34;color:#a6e22e&#34;&gt;options&lt;/span&gt;(na.action &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; na.warn)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;1-sample-데이터-추출&#34;&gt;(1) Sample 데이터 추출&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;code&gt;evals&lt;/code&gt; 데이터에서 20개 정도의 데이터만 추출합니다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;set.seed&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;1234&lt;/span&gt;) &lt;span style=&#34;color:#75715e&#34;&gt;# 재현성&lt;/span&gt;
sample_20 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; evals &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;sample_n&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;20&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;select&lt;/span&gt;(bty_avg, score)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id=&#34;2-250개의-모형&#34;&gt;(2) 250개의 모형&lt;/h3&gt;
&lt;p&gt;우선 히스토그램을 작성한다. &lt;code&gt;evals&lt;/code&gt; 데이터에 있는 2개의 변수를 활용해서 산점도를 그려본다.&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;x축은 &lt;code&gt;bty_avg&lt;/code&gt;&lt;/li&gt;
&lt;li&gt;y축은 &lt;code&gt;score&lt;/code&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_20, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; bty_avg, y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; score)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_point&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://chloevan.github.io/img/datavisualisation/ch04_modeling_visualisation_files/figure-html/unnamed-chunk-3-1.png&#34; alt=&#34;&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;데이터를 보면, 우상향으로 데이터가 모여 있는 것을 볼 수 있다.&lt;/li&gt;
&lt;li&gt;이 때, 양변수가 만나는 점을 설명할 수 있는 모형을 만들어보자.&lt;/li&gt;
&lt;li&gt;보통 이러한 관계를 선형 관계라고 표현한다.
$$ y = a_0 + a_x \times x $$&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;위 데이터에 접하는 모형 250개를 만들어 보자.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;models &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;tibble&lt;/span&gt;(
  a1 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runif&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;250&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0.5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;),
  a2 &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;runif&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;250&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;-.5&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;)
)

&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_20, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; bty_avg, y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; score)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_abline&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(intercept &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; a1, slope &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; a2), data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; models, alpha&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;1&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_point&lt;/span&gt;(color &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;, alpha &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;theme_bw&lt;/span&gt;()
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://chloevan.github.io/img/datavisualisation/ch04_modeling_visualisation_files/figure-html/unnamed-chunk-4-1.png&#34; alt=&#34;&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;위 모형에서 보는 것처럼 굉장히 다양한 모형을 만들면서 최적의 모형을 찾는 고정이 모형이다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;3-최적의-모형-찾기&#34;&gt;(3) 최적의 모형 찾기&lt;/h3&gt;
&lt;p&gt;최적의 모형은 어떻게 찾을 수 있을까?&lt;/p&gt;
&lt;p&gt;최적의 모형을 찾으려면 &lt;code&gt;ggplot2&lt;/code&gt; 패키지 내 &lt;code&gt;geom_smooth()&lt;/code&gt;를 사용할 수 있다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_20, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; bty_avg, y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; score)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_point&lt;/span&gt;(color &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;blue&amp;#34;&lt;/span&gt;, alpha &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;&lt;span style=&#34;color:#f92672&#34;&gt;/&lt;/span&gt;&lt;span style=&#34;color:#ae81ff&#34;&gt;4&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_smooth&lt;/span&gt;(method &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;lm&amp;#34;&lt;/span&gt;, se&lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt;&lt;span style=&#34;color:#66d9ef&#34;&gt;FALSE&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## `geom_smooth()` using formula &#39;y ~ x&#39;
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;&lt;img src=&#34;https://chloevan.github.io/img/datavisualisation/ch04_modeling_visualisation_files/figure-html/unnamed-chunk-5-1.png&#34; alt=&#34;&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;h3 id=&#34;4-computing-distance&#34;&gt;(4) Computing Distance&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;최적의 모형을 찾은 다음에 각각의 모형으로 각 점들이 얼마나 떨어졌는지 확인하는 함수를 작성한다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;3가지 함수가 필요하다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;model_1&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;measure_distance&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;eval_dist&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;model_1 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(a, data) {
  a[1] &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; data&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;bty_avg &lt;span style=&#34;color:#f92672&#34;&gt;*&lt;/span&gt; a[2]
}
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;ul&gt;
&lt;li&gt;위 함수는 기울기와 상수를 정의하는 단순 회귀 모형 함수를 만든 것이다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a[1]&lt;/code&gt;은 상수를 의미한다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;a[2]&lt;/code&gt;은 기울기를 의미한다.&lt;/li&gt;
&lt;li&gt;&lt;code&gt;data$scope&lt;/code&gt;는 기울기를 의미한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;measure_distance &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(mod, data) {
  diff &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; data&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;score &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;model_1&lt;/span&gt;(mod, data)
  &lt;span style=&#34;color:#a6e22e&#34;&gt;sqrt&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;mean&lt;/span&gt;(diff^2))
}

&lt;span style=&#34;color:#a6e22e&#34;&gt;measure_distance&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;3&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;), sample_20)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 7.23253
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;
&lt;p&gt;최적의 모형을 찾을 때 &lt;code&gt;RMSE&lt;/code&gt;이라는 평균 제곱근 오차라는 통계적인 평가지표를 활용한다.&lt;/p&gt;
&lt;/li&gt;
&lt;li&gt;
&lt;p&gt;위 함수는 기울기(=3)와 상수(=2)를 적용해서 데이터 &lt;code&gt;sample_20&lt;/code&gt;에 대한 RMSE 값을 측정한 결과는 &lt;code&gt;7.23253&lt;/code&gt; 이 나왔다.&lt;/p&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;5-all-model-dist&#34;&gt;(5) All model dist&lt;/h3&gt;
&lt;p&gt;이제 전체 데이터와 모형간의 &lt;code&gt;거리&lt;/code&gt;를 계산한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;all_model_dist &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;function&lt;/span&gt;(a1, a2) {
  &lt;span style=&#34;color:#a6e22e&#34;&gt;measure_distance&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(a1, a2), sample_20)
}

models2 &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; models &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;mutate&lt;/span&gt;(dist &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; purrr&lt;span style=&#34;color:#f92672&#34;&gt;::&lt;/span&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;map2_dbl&lt;/span&gt;(a1, a2, all_model_dist))

models2 &lt;span style=&#34;color:#f92672&#34;&gt;%&amp;gt;%&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;head&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## # A tibble: 5 x 3
##      a1     a2  dist
##   &amp;lt;dbl&amp;gt;  &amp;lt;dbl&amp;gt; &amp;lt;dbl&amp;gt;
## 1 0.640  0.699 1.42 
## 2 1.27  -0.461 4.85 
## 3 3.34   0.260 0.666
## 4 2.34   0.732 1.53 
## 5 3.70   0.317 1.00
&lt;/code&gt;&lt;/pre&gt;&lt;h3 id=&#34;6-best-5-model&#34;&gt;(6) Best 5 model&lt;/h3&gt;
&lt;p&gt;위 데이터를 근거로 가장 좋은 모델 5개를 찾는 그래프를 작성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_20, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(x &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; bty_avg, y &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; score)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_point&lt;/span&gt;(size &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, colour &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;grey30&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_abline&lt;/span&gt;(
    &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(intercept &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; a1, slope &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; a2, colour &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#f92672&#34;&gt;-&lt;/span&gt;dist), 
    data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;filter&lt;/span&gt;(models2, &lt;span style=&#34;color:#a6e22e&#34;&gt;rank&lt;/span&gt;(dist) &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;5&lt;/span&gt;)
  )
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://chloevan.github.io/img/datavisualisation/ch04_modeling_visualisation_files/figure-html/unnamed-chunk-9-1.png&#34; alt=&#34;&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;위 그래프는 주어진 데이터에서 가장 좋은 모형 5개를 확인할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id=&#34;7-최적의-모형-찾기&#34;&gt;(7) 최적의 모형 찾기&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;이제 &lt;code&gt;optim()&lt;/code&gt; 함수를 활용해서 최적의 기울기와 상수를 찾아보도록 한다.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;best &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;optim&lt;/span&gt;(&lt;span style=&#34;color:#a6e22e&#34;&gt;c&lt;/span&gt;(&lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;, &lt;span style=&#34;color:#ae81ff&#34;&gt;0&lt;/span&gt;), measure_distance, data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample_20)

best&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;par
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## [1] 3.91539624 0.07585949
&lt;/code&gt;&lt;/pre&gt;&lt;p&gt;기울기와 상수를 적용하여 다시 &lt;code&gt;ggplot2&lt;/code&gt; 그래프를 작성한다.&lt;/p&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;&lt;span style=&#34;color:#a6e22e&#34;&gt;ggplot&lt;/span&gt;(sample_20, &lt;span style=&#34;color:#a6e22e&#34;&gt;aes&lt;/span&gt;(bty_avg, score)) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_point&lt;/span&gt;(size &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#ae81ff&#34;&gt;2&lt;/span&gt;, colour &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; &lt;span style=&#34;color:#e6db74&#34;&gt;&amp;#34;grey30&amp;#34;&lt;/span&gt;) &lt;span style=&#34;color:#f92672&#34;&gt;+&lt;/span&gt; 
  &lt;span style=&#34;color:#a6e22e&#34;&gt;geom_abline&lt;/span&gt;(intercept &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; best&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;par[1], slope &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; best&lt;span style=&#34;color:#f92672&#34;&gt;$&lt;/span&gt;par[2])
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;p&gt;&lt;img src=&#34;https://chloevan.github.io/img/datavisualisation/ch04_modeling_visualisation_files/figure-html/unnamed-chunk-11-1.png&#34; alt=&#34;&#34;&gt;&lt;!-- raw HTML omitted --&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;실제로 &lt;code&gt;lm&lt;/code&gt; 함수를 활용해여 기울기와 상수를 구해보자.&lt;/li&gt;
&lt;/ul&gt;
&lt;div class=&#34;highlight&#34;&gt;&lt;pre style=&#34;color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4&#34;&gt;&lt;code class=&#34;language-r&#34; data-lang=&#34;r&#34;&gt;lm_mod &lt;span style=&#34;color:#f92672&#34;&gt;&amp;lt;-&lt;/span&gt; &lt;span style=&#34;color:#a6e22e&#34;&gt;lm&lt;/span&gt;(score &lt;span style=&#34;color:#f92672&#34;&gt;~&lt;/span&gt; bty_avg, data &lt;span style=&#34;color:#f92672&#34;&gt;=&lt;/span&gt; sample_20)

&lt;span style=&#34;color:#a6e22e&#34;&gt;coef&lt;/span&gt;(lm_mod)
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;pre&gt;&lt;code&gt;## (Intercept)     bty_avg 
##  3.91595907  0.07572129
&lt;/code&gt;&lt;/pre&gt;&lt;ul&gt;
&lt;li&gt;실제로 &lt;code&gt;best&lt;/code&gt;에서 추출한 것과, &lt;code&gt;lm&lt;/code&gt; 함수를 사용한 값이라 동일한 것을 확인할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;iv-결론&#34;&gt;IV. 결론&lt;/h2&gt;
&lt;ul&gt;
&lt;li&gt;이번 포스트의 목적은 &lt;code&gt;ggplot2&lt;/code&gt; 패키지를 활용하여 최적의 모형을 찾는 과정을 살펴 봤다.&lt;/li&gt;
&lt;li&gt;시각화는 이렇게 모형을 찾는 과정도 넣을 수 있는데, 이러한 시각화를 활용하면 보다 효율적으로 선형회귀 모형에 대해 설명을 할 수 있다.&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id=&#34;v-reference&#34;&gt;V. Reference&lt;/h2&gt;
&lt;p&gt;Grolemund, G., &amp;amp; Wickham, H. (n.d.). R for Data Science. Retrieved from &lt;a href=&#34;https://r4ds.had.co.nz/&#34;&gt;https://r4ds.had.co.nz/&lt;/a&gt;&lt;/p&gt;
&lt;section class=&#34;footnotes&#34; role=&#34;doc-endnotes&#34;&gt;
&lt;hr&gt;
&lt;ol&gt;
&lt;li id=&#34;fn:1&#34; role=&#34;doc-endnote&#34;&gt;
&lt;p&gt;Hadley Wickham이 작성한 ggplot2 패키지에 관한 논문을 읽어보는 것을 제안한다. “The Layered Grammar of Graphics”, &lt;a href=&#34;http://vita.had.co.nz/papers/layered-grammar.pdf&#34;&gt;http://vita.had.co.nz/papers/layered-grammar.pdf&lt;/a&gt; &lt;a href=&#34;#fnref:1&#34; class=&#34;footnote-backref&#34; role=&#34;doc-backlink&#34;&gt;&amp;#x21a9;&amp;#xfe0e;&lt;/a&gt;&lt;/p&gt;
&lt;/li&gt;
&lt;/ol&gt;
&lt;/section&gt;
</description>
    </item>
    
  </channel>
</rss>